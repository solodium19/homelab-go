## Homelab Kubernetes Platform (Production‚Äëlike)

 –≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –º–æ—é –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—É—é **production‚Äëlike Kubernetes –ø–ª–∞—Ç—Ñ–æ—Ä–º—É**, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –Ω–∞ bare‚Äëmetal –∫–ª–∞—Å—Ç–µ—Ä–µ –∏–∑ 3 –Ω–æ–¥. –ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, CI/CD, GitOps, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, TLS, ingress‚Äë—Å–ª–æ–π, Helm‚Äë—á–∞—Ä—Ç—ã –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è dev/stage/prod.

 –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ DevOps ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω—ã–π –∫ —Ä–µ–∞–ª—å–Ω—ã–º –ø—Ä–æ–¥–æ–≤—ã–º –ø—Ä–æ—Ü–µ—Å—Å–∞–º.

---

## üìå –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

* **Kubernetes cluster (3 nodes, bare-metal)**
* **GitLab CI/CD**: —Å–±–æ—Ä–∫–∞ Docker‚Äë–æ–±—Ä–∞–∑–æ–≤ —á–µ—Ä–µ–∑ Kaniko, –ø—É—à –≤ registry, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤
* **ArgoCD (GitOps)**: –∞–≤—Ç–æ—Å–∏–Ω–∫ dev/stage/prod –æ–∫—Ä—É–∂–µ–Ω–∏–π
* **Helm‚Äë—á–∞—Ä—Ç—ã (–Ω–∞–ø–∏—Å–∞–Ω—ã —Å –Ω—É–ª—è)**: deployment, statefulset, PVC, secrets, service, ingress
* **Kustomize**: —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏–π (dev/stage/prod) —Å overlay'—è–º–∏
* **Ingress NGINX + TLS (cert‚Äëmanager)**
* **Monitoring stack**: kube‚Äëprometheus‚Äëstack, Grafana, Alertmanager
* **Logging**: FluentBit ‚Üí OpenSearch ‚Üí OpenSearch Dashboards

–ü–∞–π–ø–ª–∞–π–Ω –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```
Git Push ‚Üí GitLab CI ‚Üí Kaniko build/push ‚Üí Update manifests ‚Üí ArgoCD sync ‚Üí Deploy to cluster
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
homelab-go/
‚îú‚îÄ‚îÄ main/                     # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ k8s-manifests/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ charts/           # Helm-—á–∞—Ä—Ç—ã, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ —Å –Ω—É–ª—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ k8s/              # Kustomize (overlays/base)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ manifests/        # –†—É—á–Ω—ã–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã (—Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã, —à–∞–±–ª–æ–Ω—ã)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ infra/                        # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ keda/                     # HPA –Ω–∞ –æ—Å–Ω–æ–≤–µ Keda
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ingress-controller/       # ingress-nginx, –ø—Ä–∞–≤–∏–ª–∞, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kube-prometheus-stack/    # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ kube-prometheus-stack
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ argoCD/                   # GitOps –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   |‚îÄ‚îÄ logging-with-opensearch/  # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
|   |   |‚îÄ‚îÄ gitlab-runner/            # Self-Hoster runner gitlab
|   |   ‚îî‚îÄ‚îÄ cert-manager/             # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ develop/                  # –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ dev-–æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ stage/                    # stage-–æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îÇ
‚îú‚îÄ‚îÄ CI-Pipelines/
‚îÇ   ‚îî‚îÄ‚îÄ .gitlab-ci/           # GitLab CI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (Kaniko, deploy, jobs)
‚îÇ
‚îî‚îÄ‚îÄ README.md
```

---

##  CI/CD

### GitLab CI

* Self‚Äëhosted GitLab Runner
* Kaniko –¥–ª—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–æ–≤
* –ü—É—à —á–µ—Ä–µ–∑ GitLab Registry Token
* –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ YAML‚Äë–º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ (Kustomize)
* –°–±–æ—Ä–∫–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

### Deployment flow

1. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø—É—à–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ç–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. GitLab CI —Å–æ–±–∏—Ä–∞–µ—Ç Docker‚Äë–æ–±—Ä–∞–∑
3. –û–±—Ä–∞–∑ –ø—É—à–∏—Ç—Å—è –≤ registry
4. GitLab –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–µ–≥–∏ –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞—Ö dev/stage/prod
5. ArgoCD autodsync –¥–µ–ø–ª–æ–∏—Ç –Ω—É–∂–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
(–í –±—É–¥—É—â–µ–º –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ helm, –ø—Ä–æ–≤–µ—Ä–∫—É –æ–±—Ä–∞–∑–æ–≤ –∏ —Ç–µ—Å—Ç—ã –∫–æ–¥–∞)
---

##  GitOps (ArgoCD)

ArgoCD –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–ª–∞—Å—Ç–µ—Ä–∞.

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

* –ü–æ–ª–Ω—ã–π GitOps –¥–ª—è –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
* Auto‚Äësync –≤–∫–ª—é—á–µ–Ω
* Health checks
* Rollout policy
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

* `applications/` ‚Äî ArgoCD App/Project
* `overlays/` ‚Äî –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ dev/stage/prod

---

##  Helm‚Äë—á–∞—Ä—Ç—ã

–ü–∏—Å–∞–ª–∏—Å—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—Ä—É—á–Ω—É—é.

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

* Deployment / StatefulSet
* ConfigMap / Secret
* PVC / PV
* Resources / labels ( –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å Readiness,Health probes)
* –ü–æ–ª–Ω–∞—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∞—Ü–∏—è Values.yaml –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–≥—Ä—É–∂–µ–Ω–∏–π

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

* kube‚Äëprometheus‚Äëstack
* Grafana (–¥–∞—à–±–æ—Ä–¥—ã)
* Prometheus Rules
* Alertmanager

–î–æ—Å—Ç—É–ø–Ω—ã:

* –º–µ—Ç—Ä–∏–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
* –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
* –∞–ª–µ—Ä—Ç—ã –ø–æ CPU/Memory/Pod Health –≤ Telegram

---

##  –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

* FluentBit –∫–∞–∫ DaemonSet
* –û—Ç–ø—Ä–∞–≤–∫–∞ –ª–æ–≥–æ–≤ –≤ OpenSearch
* –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ OpenSearch Dashboards

–ü–æ–∫—Ä—ã–≤–∞—é—Ç—Å—è:

* Pod logs
* —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
* —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

* cert‚Äëmanager –Ω–∞ —Å–≤–æ–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω–æ–º —Ü–µ–Ω—Ç—Ä–µ(–Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –¥–æ–º–µ–Ω–µ)
* TLS –¥–ª—è ingress
* Kubernetes Secrets + –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Git

---

##  –û–∫—Ä—É–∂–µ–Ω–∏—è

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç—Ä–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:

* `dev/` ‚Äî –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–æ–≤
* `stage/` ‚Äî –ø—Ä–µ–¥–ø—Ä–æ–¥
* `prod/` ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —á–µ—Ä–µ–∑ Kustomize overlays. # –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ helm

---

## ü§ù –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã ‚Äî –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å:

* Telegram: **@solodium19**

–ü—Ä–æ–µ–∫—Ç –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è ‚Äî –±—É–¥—É —Ä–∞–¥ —Ñ–∏–¥–±–µ–∫—É –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º –¥–ª—è –Ω–æ–≤—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π.



